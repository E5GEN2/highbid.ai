/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/nowpayments/callback/route";
exports.ids = ["app/api/nowpayments/callback/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "../app-render/work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "crypto":
/*!*************************!*\
  !*** external "crypto" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("crypto");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnowpayments%2Fcallback%2Froute&page=%2Fapi%2Fnowpayments%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnowpayments%2Fcallback%2Froute.ts&appDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnowpayments%2Fcallback%2Froute&page=%2Fapi%2Fnowpayments%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnowpayments%2Fcallback%2Froute.ts&appDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var _Users_rofeevgenii_Desktop_lab_highbidai_app_api_nowpayments_callback_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/nowpayments/callback/route.ts */ \"(rsc)/./app/api/nowpayments/callback/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/nowpayments/callback/route\",\n        pathname: \"/api/nowpayments/callback\",\n        filename: \"route\",\n        bundlePath: \"app/api/nowpayments/callback/route\"\n    },\n    resolvedPagePath: \"/Users/rofeevgenii/Desktop/lab/highbidai/app/api/nowpayments/callback/route.ts\",\n    nextConfigOutput,\n    userland: _Users_rofeevgenii_Desktop_lab_highbidai_app_api_nowpayments_callback_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZub3dwYXltZW50cyUyRmNhbGxiYWNrJTJGcm91dGUmcGFnZT0lMkZhcGklMkZub3dwYXltZW50cyUyRmNhbGxiYWNrJTJGcm91dGUmYXBwUGF0aHM9JnBhZ2VQYXRoPXByaXZhdGUtbmV4dC1hcHAtZGlyJTJGYXBpJTJGbm93cGF5bWVudHMlMkZjYWxsYmFjayUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRnJvZmVldmdlbmlpJTJGRGVza3RvcCUyRmxhYiUyRmhpZ2hiaWRhaSUyRmFwcCZwYWdlRXh0ZW5zaW9ucz10c3gmcGFnZUV4dGVuc2lvbnM9dHMmcGFnZUV4dGVuc2lvbnM9anN4JnBhZ2VFeHRlbnNpb25zPWpzJnJvb3REaXI9JTJGVXNlcnMlMkZyb2ZlZXZnZW5paSUyRkRlc2t0b3AlMkZsYWIlMkZoaWdoYmlkYWkmaXNEZXY9dHJ1ZSZ0c2NvbmZpZ1BhdGg9dHNjb25maWcuanNvbiZiYXNlUGF0aD0mYXNzZXRQcmVmaXg9Jm5leHRDb25maWdPdXRwdXQ9JnByZWZlcnJlZFJlZ2lvbj0mbWlkZGxld2FyZUNvbmZpZz1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQzhCO0FBQzNHO0FBQ0E7QUFDQTtBQUNBLHdCQUF3Qix5R0FBbUI7QUFDM0M7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsc0RBQXNEO0FBQzlEO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQzBGOztBQUUxRiIsInNvdXJjZXMiOlsiIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1tb2R1bGVzL2FwcC1yb3V0ZS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIvVXNlcnMvcm9mZWV2Z2VuaWkvRGVza3RvcC9sYWIvaGlnaGJpZGFpL2FwcC9hcGkvbm93cGF5bWVudHMvY2FsbGJhY2svcm91dGUudHNcIjtcbi8vIFdlIGluamVjdCB0aGUgbmV4dENvbmZpZ091dHB1dCBoZXJlIHNvIHRoYXQgd2UgY2FuIHVzZSB0aGVtIGluIHRoZSByb3V0ZVxuLy8gbW9kdWxlLlxuY29uc3QgbmV4dENvbmZpZ091dHB1dCA9IFwiXCJcbmNvbnN0IHJvdXRlTW9kdWxlID0gbmV3IEFwcFJvdXRlUm91dGVNb2R1bGUoe1xuICAgIGRlZmluaXRpb246IHtcbiAgICAgICAga2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgcGFnZTogXCIvYXBpL25vd3BheW1lbnRzL2NhbGxiYWNrL3JvdXRlXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvbm93cGF5bWVudHMvY2FsbGJhY2tcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL25vd3BheW1lbnRzL2NhbGxiYWNrL3JvdXRlXCJcbiAgICB9LFxuICAgIHJlc29sdmVkUGFnZVBhdGg6IFwiL1VzZXJzL3JvZmVldmdlbmlpL0Rlc2t0b3AvbGFiL2hpZ2hiaWRhaS9hcHAvYXBpL25vd3BheW1lbnRzL2NhbGxiYWNrL3JvdXRlLnRzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgd29ya0FzeW5jU3RvcmFnZSwgd29ya1VuaXRBc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzIH0gPSByb3V0ZU1vZHVsZTtcbmZ1bmN0aW9uIHBhdGNoRmV0Y2goKSB7XG4gICAgcmV0dXJuIF9wYXRjaEZldGNoKHtcbiAgICAgICAgd29ya0FzeW5jU3RvcmFnZSxcbiAgICAgICAgd29ya1VuaXRBc3luY1N0b3JhZ2VcbiAgICB9KTtcbn1cbmV4cG9ydCB7IHJvdXRlTW9kdWxlLCB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MsIHBhdGNoRmV0Y2gsICB9O1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1hcHAtcm91dGUuanMubWFwIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnowpayments%2Fcallback%2Froute&page=%2Fapi%2Fnowpayments%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnowpayments%2Fcallback%2Froute.ts&appDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!******************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \******************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(rsc)/./app/api/nowpayments/callback/route.ts":
/*!***********************************************!*\
  !*** ./app/api/nowpayments/callback/route.ts ***!
  \***********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase-client */ \"(rsc)/./lib/supabase-client.ts\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! crypto */ \"crypto\");\n/* harmony import */ var crypto__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(crypto__WEBPACK_IMPORTED_MODULE_2__);\n\n\n\nasync function POST(request) {\n    try {\n        const body = await request.text();\n        const webhook = JSON.parse(body);\n        // Log the webhook for debugging\n        console.log('NowPayments webhook received:', webhook);\n        // Verify webhook signature\n        const signature = request.headers.get('x-nowpayments-sig');\n        if (!verifyWebhookSignature(body, signature)) {\n            console.error('Invalid webhook signature');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Invalid signature'\n            }, {\n                status: 401\n            });\n        }\n        // Verify API key is configured\n        const apiKey = \"4AY3JW0-DTS4GWV-QDJSYT8-FJX7BS7\";\n        if (!apiKey) {\n            console.error('NowPayments API key not configured');\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'API key not configured'\n            }, {\n                status: 500\n            });\n        }\n        // Only process successful payments\n        if (webhook.payment_status === 'finished' || webhook.payment_status === 'confirmed') {\n            await processSuccessfulPayment(webhook);\n        } else if (webhook.payment_status === 'failed' || webhook.payment_status === 'refunded') {\n            await processFailedPayment(webhook);\n        }\n        // Always respond with 200 to acknowledge receipt\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            status: 'received'\n        });\n    } catch (error) {\n        console.error('Error processing NowPayments webhook:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error'\n        }, {\n            status: 500\n        });\n    }\n}\nasync function processSuccessfulPayment(webhook) {\n    try {\n        // Extract user ID from order_id (format: \"topup-{timestamp}-{userId}\")\n        const userId = extractUserIdFromOrderId(webhook.order_id);\n        if (!userId) {\n            console.error('Could not extract user ID from order_id:', webhook.order_id);\n            return;\n        }\n        const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Update user balance using the database function\n        const { data: newBalance, error: balanceError } = await supabase.rpc('update_user_balance', {\n            p_user_id: userId,\n            p_amount: webhook.price_amount,\n            p_operation: 'add'\n        });\n        if (balanceError) {\n            console.error('Error updating balance:', balanceError);\n        } else {\n            console.log(`Updated balance for user ${userId}: $${newBalance}`);\n        }\n        // Update existing transaction status\n        const { error: transactionError } = await supabase.from('transactions').update({\n            status: 'completed',\n            updated_at: new Date().toISOString()\n        }).eq('payment_id', webhook.payment_id);\n        if (transactionError) {\n            console.error('Error recording transaction:', transactionError);\n        }\n        console.log(`Successfully processed payment for user ${userId}: +$${webhook.price_amount}`);\n    } catch (error) {\n        console.error('Error in processSuccessfulPayment:', error);\n    }\n}\nasync function processFailedPayment(webhook) {\n    try {\n        const userId = extractUserIdFromOrderId(webhook.order_id);\n        if (!userId) return;\n        const supabase = (0,_lib_supabase_client__WEBPACK_IMPORTED_MODULE_1__.createClient)();\n        // Record failed transaction\n        const { error } = await supabase.from('transactions').insert({\n            user_id: userId,\n            type: 'credit',\n            amount: webhook.price_amount,\n            description: `Failed top-up via ${webhook.pay_currency.toUpperCase()}`,\n            payment_id: webhook.payment_id,\n            status: 'failed',\n            created_at: new Date().toISOString()\n        });\n        if (error) {\n            console.error('Error recording failed transaction:', error);\n        }\n        console.log(`Recorded failed payment for user ${userId}: $${webhook.price_amount}`);\n    } catch (error) {\n        console.error('Error in processFailedPayment:', error);\n    }\n}\nfunction verifyWebhookSignature(body, signature) {\n    if (!signature) {\n        console.warn('No signature provided in webhook');\n        return true; // Allow for testing - remove in production\n    }\n    const ipnSecret = process.env.NOWPAYMENTS_IPN_SECRET;\n    if (!ipnSecret) {\n        console.warn('IPN secret not configured');\n        return true; // Allow for testing - remove in production\n    }\n    try {\n        // NowPayments uses HMAC-SHA512 for signature verification\n        const expectedSignature = crypto__WEBPACK_IMPORTED_MODULE_2___default().createHmac('sha512', ipnSecret).update(body).digest('hex');\n        return signature === expectedSignature;\n    } catch (error) {\n        console.error('Error verifying signature:', error);\n        return false;\n    }\n}\nfunction extractUserIdFromOrderId(orderId) {\n    // Order_id format: \"topup-{timestamp}-{userId}\"\n    const parts = orderId.split('-');\n    if (parts.length === 3 && parts[0] === 'topup') {\n        return parts[2]; // Return the user ID part\n    }\n    return null;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9hcHAvYXBpL25vd3BheW1lbnRzL2NhbGxiYWNrL3JvdXRlLnRzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQXdEO0FBQ0g7QUFDekI7QUFtQnJCLGVBQWVHLEtBQUtDLE9BQW9CO0lBQzdDLElBQUk7UUFDRixNQUFNQyxPQUFPLE1BQU1ELFFBQVFFLElBQUk7UUFDL0IsTUFBTUMsVUFBOEJDLEtBQUtDLEtBQUssQ0FBQ0o7UUFFL0MsZ0NBQWdDO1FBQ2hDSyxRQUFRQyxHQUFHLENBQUMsaUNBQWlDSjtRQUU3QywyQkFBMkI7UUFDM0IsTUFBTUssWUFBWVIsUUFBUVMsT0FBTyxDQUFDQyxHQUFHLENBQUM7UUFDdEMsSUFBSSxDQUFDQyx1QkFBdUJWLE1BQU1PLFlBQVk7WUFDNUNGLFFBQVFNLEtBQUssQ0FBQztZQUNkLE9BQU9oQixxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQztnQkFBRUQsT0FBTztZQUFvQixHQUFHO2dCQUFFRSxRQUFRO1lBQUk7UUFDekU7UUFFQSwrQkFBK0I7UUFDL0IsTUFBTUMsU0FBU0MsaUNBQTJDO1FBQzFELElBQUksQ0FBQ0QsUUFBUTtZQUNYVCxRQUFRTSxLQUFLLENBQUM7WUFDZCxPQUFPaEIscURBQVlBLENBQUNpQixJQUFJLENBQUM7Z0JBQUVELE9BQU87WUFBeUIsR0FBRztnQkFBRUUsUUFBUTtZQUFJO1FBQzlFO1FBRUEsbUNBQW1DO1FBQ25DLElBQUlYLFFBQVFnQixjQUFjLEtBQUssY0FBY2hCLFFBQVFnQixjQUFjLEtBQUssYUFBYTtZQUNuRixNQUFNQyx5QkFBeUJqQjtRQUNqQyxPQUFPLElBQUlBLFFBQVFnQixjQUFjLEtBQUssWUFBWWhCLFFBQVFnQixjQUFjLEtBQUssWUFBWTtZQUN2RixNQUFNRSxxQkFBcUJsQjtRQUM3QjtRQUVBLGlEQUFpRDtRQUNqRCxPQUFPUCxxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQztZQUFFQyxRQUFRO1FBQVc7SUFDaEQsRUFBRSxPQUFPRixPQUFPO1FBQ2ROLFFBQVFNLEtBQUss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LENBQUMsVUFBVXFELFdBQ3JCZixNQUFNLENBQUNuQyxNQUNQc0QsTUFBTSxDQUFDO1FBRVYsT0FBTy9DLGNBQWM2QztJQUN2QixFQUFFLE9BQU96QyxPQUFPO1FBQ2ROLFFBQVFNLEtBQUssQ0FBQyw4QkFBOEJBO1FBQzVDLE9BQU87SUFDVDtBQUNGO0FBRUEsU0FBU1cseUJBQXlCaUMsT0FBZTtJQUMvQyxnREFBZ0Q7SUFDaEQsTUFBTUMsUUFBUUQsUUFBUUUsS0FBSyxDQUFDO0lBQzVCLElBQUlELE1BQU1FLE1BQU0sS0FBSyxLQUFLRixLQUFLLENBQUMsRUFBRSxLQUFLLFNBQVM7UUFDOUMsT0FBT0EsS0FBSyxDQUFDLEVBQUUsRUFBRSwwQkFBMEI7SUFDN0M7SUFDQSxPQUFPO0FBQ1QiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2ZlZXZnZW5paS9EZXNrdG9wL2xhYi9oaWdoYmlkYWkvYXBwL2FwaS9ub3dwYXltZW50cy9jYWxsYmFjay9yb3V0ZS50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBOZXh0UmVxdWVzdCwgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInO1xuaW1wb3J0IHsgY3JlYXRlQ2xpZW50IH0gZnJvbSAnQC9saWIvc3VwYWJhc2UtY2xpZW50JztcbmltcG9ydCBjcnlwdG8gZnJvbSAnY3J5cHRvJztcblxuaW50ZXJmYWNlIE5vd1BheW1lbnRzV2ViaG9vayB7XG4gIHBheW1lbnRfaWQ6IHN0cmluZztcbiAgcGF5bWVudF9zdGF0dXM6IHN0cmluZztcbiAgcGF5X2FkZHJlc3M6IHN0cmluZztcbiAgcHJpY2VfYW1vdW50OiBudW1iZXI7XG4gIHByaWNlX2N1cnJlbmN5OiBzdHJpbmc7XG4gIHBheV9hbW91bnQ6IG51bWJlcjtcbiAgcGF5X2N1cnJlbmN5OiBzdHJpbmc7XG4gIG9yZGVyX2lkOiBzdHJpbmc7XG4gIG9yZGVyX2Rlc2NyaXB0aW9uOiBzdHJpbmc7XG4gIHB1cmNoYXNlX2lkPzogc3RyaW5nO1xuICBjcmVhdGVkX2F0OiBzdHJpbmc7XG4gIHVwZGF0ZWRfYXQ6IHN0cmluZztcbiAgb3V0Y29tZV9hbW91bnQ/OiBudW1iZXI7XG4gIG91dGNvbWVfY3VycmVuY3k/OiBzdHJpbmc7XG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcXVlc3Q6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QudGV4dCgpO1xuICAgIGNvbnN0IHdlYmhvb2s6IE5vd1BheW1lbnRzV2ViaG9vayA9IEpTT04ucGFyc2UoYm9keSk7XG5cbiAgICAvLyBMb2cgdGhlIHdlYmhvb2sgZm9yIGRlYnVnZ2luZ1xuICAgIGNvbnNvbGUubG9nKCdOb3dQYXltZW50cyB3ZWJob29rIHJlY2VpdmVkOicsIHdlYmhvb2spO1xuXG4gICAgLy8gVmVyaWZ5IHdlYmhvb2sgc2lnbmF0dXJlXG4gICAgY29uc3Qgc2lnbmF0dXJlID0gcmVxdWVzdC5oZWFkZXJzLmdldCgneC1ub3dwYXltZW50cy1zaWcnKTtcbiAgICBpZiAoIXZlcmlmeVdlYmhvb2tTaWduYXR1cmUoYm9keSwgc2lnbmF0dXJlKSkge1xuICAgICAgY29uc29sZS5lcnJvcignSW52YWxpZCB3ZWJob29rIHNpZ25hdHVyZScpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdJbnZhbGlkIHNpZ25hdHVyZScgfSwgeyBzdGF0dXM6IDQwMSB9KTtcbiAgICB9XG5cbiAgICAvLyBWZXJpZnkgQVBJIGtleSBpcyBjb25maWd1cmVkXG4gICAgY29uc3QgYXBpS2V5ID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfTk9XUEFZTUVOVFNfQVBJX0tFWTtcbiAgICBpZiAoIWFwaUtleSkge1xuICAgICAgY29uc29sZS5lcnJvcignTm93UGF5bWVudHMgQVBJIGtleSBub3QgY29uZmlndXJlZCcpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdBUEkga2V5IG5vdCBjb25maWd1cmVkJyB9LCB7IHN0YXR1czogNTAwIH0pO1xuICAgIH1cblxuICAgIC8vIE9ubHkgcHJvY2VzcyBzdWNjZXNzZnVsIHBheW1lbnRzXG4gICAgaWYgKHdlYmhvb2sucGF5bWVudF9zdGF0dXMgPT09ICdmaW5pc2hlZCcgfHwgd2ViaG9vay5wYXltZW50X3N0YXR1cyA9PT0gJ2NvbmZpcm1lZCcpIHtcbiAgICAgIGF3YWl0IHByb2Nlc3NTdWNjZXNzZnVsUGF5bWVudCh3ZWJob29rKTtcbiAgICB9IGVsc2UgaWYgKHdlYmhvb2sucGF5bWVudF9zdGF0dXMgPT09ICdmYWlsZWQnIHx8IHdlYmhvb2sucGF5bWVudF9zdGF0dXMgPT09ICdyZWZ1bmRlZCcpIHtcbiAgICAgIGF3YWl0IHByb2Nlc3NGYWlsZWRQYXltZW50KHdlYmhvb2spO1xuICAgIH1cblxuICAgIC8vIEFsd2F5cyByZXNwb25kIHdpdGggMjAwIHRvIGFja25vd2xlZGdlIHJlY2VpcHRcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBzdGF0dXM6ICdyZWNlaXZlZCcgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgcHJvY2Vzc2luZyBOb3dQYXltZW50cyB3ZWJob29rOicsIGVycm9yKTtcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIHNlcnZlciBlcnJvcicgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgfVxufVxuXG5hc3luYyBmdW5jdGlvbiBwcm9jZXNzU3VjY2Vzc2Z1bFBheW1lbnQod2ViaG9vazogTm93UGF5bWVudHNXZWJob29rKSB7XG4gIHRyeSB7XG4gICAgLy8gRXh0cmFjdCB1c2VyIElEIGZyb20gb3JkZXJfaWQgKGZvcm1hdDogXCJ0b3B1cC17dGltZXN0YW1wfS17dXNlcklkfVwiKVxuICAgIGNvbnN0IHVzZXJJZCA9IGV4dHJhY3RVc2VySWRGcm9tT3JkZXJJZCh3ZWJob29rLm9yZGVyX2lkKTtcbiAgICBpZiAoIXVzZXJJZCkge1xuICAgICAgY29uc29sZS5lcnJvcignQ291bGQgbm90IGV4dHJhY3QgdXNlciBJRCBmcm9tIG9yZGVyX2lkOicsIHdlYmhvb2sub3JkZXJfaWQpO1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGNvbnN0IHN1cGFiYXNlID0gY3JlYXRlQ2xpZW50KCk7XG5cbiAgICAvLyBVcGRhdGUgdXNlciBiYWxhbmNlIHVzaW5nIHRoZSBkYXRhYmFzZSBmdW5jdGlvblxuICAgIGNvbnN0IHsgZGF0YTogbmV3QmFsYW5jZSwgZXJyb3I6IGJhbGFuY2VFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgIC5ycGMoJ3VwZGF0ZV91c2VyX2JhbGFuY2UnLCB7XG4gICAgICAgIHBfdXNlcl9pZDogdXNlcklkLFxuICAgICAgICBwX2Ftb3VudDogd2ViaG9vay5wcmljZV9hbW91bnQsXG4gICAgICAgIHBfb3BlcmF0aW9uOiAnYWRkJ1xuICAgICAgfSk7XG5cbiAgICBpZiAoYmFsYW5jZUVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciB1cGRhdGluZyBiYWxhbmNlOicsIGJhbGFuY2VFcnJvcik7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKGBVcGRhdGVkIGJhbGFuY2UgZm9yIHVzZXIgJHt1c2VySWR9OiAkJHtuZXdCYWxhbmNlfWApO1xuICAgIH1cblxuICAgIC8vIFVwZGF0ZSBleGlzdGluZyB0cmFuc2FjdGlvbiBzdGF0dXNcbiAgICBjb25zdCB7IGVycm9yOiB0cmFuc2FjdGlvbkVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RyYW5zYWN0aW9ucycpXG4gICAgICAudXBkYXRlKHtcbiAgICAgICAgc3RhdHVzOiAnY29tcGxldGVkJyxcbiAgICAgICAgdXBkYXRlZF9hdDogbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG4gICAgICB9KVxuICAgICAgLmVxKCdwYXltZW50X2lkJywgd2ViaG9vay5wYXltZW50X2lkKTtcblxuICAgIGlmICh0cmFuc2FjdGlvbkVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWNvcmRpbmcgdHJhbnNhY3Rpb246JywgdHJhbnNhY3Rpb25FcnJvcik7XG4gICAgfVxuXG4gICAgY29uc29sZS5sb2coYFN1Y2Nlc3NmdWxseSBwcm9jZXNzZWQgcGF5bWVudCBmb3IgdXNlciAke3VzZXJJZH06ICskJHt3ZWJob29rLnByaWNlX2Ftb3VudH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBwcm9jZXNzU3VjY2Vzc2Z1bFBheW1lbnQ6JywgZXJyb3IpO1xuICB9XG59XG5cbmFzeW5jIGZ1bmN0aW9uIHByb2Nlc3NGYWlsZWRQYXltZW50KHdlYmhvb2s6IE5vd1BheW1lbnRzV2ViaG9vaykge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXJJZCA9IGV4dHJhY3RVc2VySWRGcm9tT3JkZXJJZCh3ZWJob29rLm9yZGVyX2lkKTtcbiAgICBpZiAoIXVzZXJJZCkgcmV0dXJuO1xuXG4gICAgY29uc3Qgc3VwYWJhc2UgPSBjcmVhdGVDbGllbnQoKTtcblxuICAgIC8vIFJlY29yZCBmYWlsZWQgdHJhbnNhY3Rpb25cbiAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgLmZyb20oJ3RyYW5zYWN0aW9ucycpXG4gICAgICAuaW5zZXJ0KHtcbiAgICAgICAgdXNlcl9pZDogdXNlcklkLFxuICAgICAgICB0eXBlOiAnY3JlZGl0JyxcbiAgICAgICAgYW1vdW50OiB3ZWJob29rLnByaWNlX2Ftb3VudCxcbiAgICAgICAgZGVzY3JpcHRpb246IGBGYWlsZWQgdG9wLXVwIHZpYSAke3dlYmhvb2sucGF5X2N1cnJlbmN5LnRvVXBwZXJDYXNlKCl9YCxcbiAgICAgICAgcGF5bWVudF9pZDogd2ViaG9vay5wYXltZW50X2lkLFxuICAgICAgICBzdGF0dXM6ICdmYWlsZWQnLFxuICAgICAgICBjcmVhdGVkX2F0OiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcbiAgICAgIH0pO1xuXG4gICAgaWYgKGVycm9yKSB7XG4gICAgICBjb25zb2xlLmVycm9yKCdFcnJvciByZWNvcmRpbmcgZmFpbGVkIHRyYW5zYWN0aW9uOicsIGVycm9yKTtcbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhgUmVjb3JkZWQgZmFpbGVkIHBheW1lbnQgZm9yIHVzZXIgJHt1c2VySWR9OiAkJHt3ZWJob29rLnByaWNlX2Ftb3VudH1gKTtcbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdFcnJvciBpbiBwcm9jZXNzRmFpbGVkUGF5bWVudDonLCBlcnJvcik7XG4gIH1cbn1cblxuZnVuY3Rpb24gdmVyaWZ5V2ViaG9va1NpZ25hdHVyZShib2R5OiBzdHJpbmcsIHNpZ25hdHVyZTogc3RyaW5nIHwgbnVsbCk6IGJvb2xlYW4ge1xuICBpZiAoIXNpZ25hdHVyZSkge1xuICAgIGNvbnNvbGUud2FybignTm8gc2lnbmF0dXJlIHByb3ZpZGVkIGluIHdlYmhvb2snKTtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQWxsb3cgZm9yIHRlc3RpbmcgLSByZW1vdmUgaW4gcHJvZHVjdGlvblxuICB9XG5cbiAgY29uc3QgaXBuU2VjcmV0ID0gcHJvY2Vzcy5lbnYuTk9XUEFZTUVOVFNfSVBOX1NFQ1JFVDtcbiAgaWYgKCFpcG5TZWNyZXQpIHtcbiAgICBjb25zb2xlLndhcm4oJ0lQTiBzZWNyZXQgbm90IGNvbmZpZ3VyZWQnKTtcbiAgICByZXR1cm4gdHJ1ZTsgLy8gQWxsb3cgZm9yIHRlc3RpbmcgLSByZW1vdmUgaW4gcHJvZHVjdGlvblxuICB9XG5cbiAgdHJ5IHtcbiAgICAvLyBOb3dQYXltZW50cyB1c2VzIEhNQUMtU0hBNTEyIGZvciBzaWduYXR1cmUgdmVyaWZpY2F0aW9uXG4gICAgY29uc3QgZXhwZWN0ZWRTaWduYXR1cmUgPSBjcnlwdG9cbiAgICAgIC5jcmVhdGVIbWFjKCdzaGE1MTInLCBpcG5TZWNyZXQpXG4gICAgICAudXBkYXRlKGJvZHkpXG4gICAgICAuZGlnZXN0KCdoZXgnKTtcblxuICAgIHJldHVybiBzaWduYXR1cmUgPT09IGV4cGVjdGVkU2lnbmF0dXJlO1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHZlcmlmeWluZyBzaWduYXR1cmU6JywgZXJyb3IpO1xuICAgIHJldHVybiBmYWxzZTtcbiAgfVxufVxuXG5mdW5jdGlvbiBleHRyYWN0VXNlcklkRnJvbU9yZGVySWQob3JkZXJJZDogc3RyaW5nKTogc3RyaW5nIHwgbnVsbCB7XG4gIC8vIE9yZGVyX2lkIGZvcm1hdDogXCJ0b3B1cC17dGltZXN0YW1wfS17dXNlcklkfVwiXG4gIGNvbnN0IHBhcnRzID0gb3JkZXJJZC5zcGxpdCgnLScpO1xuICBpZiAocGFydHMubGVuZ3RoID09PSAzICYmIHBhcnRzWzBdID09PSAndG9wdXAnKSB7XG4gICAgcmV0dXJuIHBhcnRzWzJdOyAvLyBSZXR1cm4gdGhlIHVzZXIgSUQgcGFydFxuICB9XG4gIHJldHVybiBudWxsO1xufSJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjcmVhdGVDbGllbnQiLCJjcnlwdG8iLCJQT1NUIiwicmVxdWVzdCIsImJvZHkiLCJ0ZXh0Iiwid2ViaG9vayIsIkpTT04iLCJwYXJzZSIsImNvbnNvbGUiLCJsb2ciLCJzaWduYXR1cmUiLCJoZWFkZXJzIiwiZ2V0IiwidmVyaWZ5V2ViaG9va1NpZ25hdHVyZSIsImVycm9yIiwianNvbiIsInN0YXR1cyIsImFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJORVhUX1BVQkxJQ19OT1dQQVlNRU5UU19BUElfS0VZIiwicGF5bWVudF9zdGF0dXMiLCJwcm9jZXNzU3VjY2Vzc2Z1bFBheW1lbnQiLCJwcm9jZXNzRmFpbGVkUGF5bWVudCIsInVzZXJJZCIsImV4dHJhY3RVc2VySWRGcm9tT3JkZXJJZCIsIm9yZGVyX2lkIiwic3VwYWJhc2UiLCJkYXRhIiwibmV3QmFsYW5jZSIsImJhbGFuY2VFcnJvciIsInJwYyIsInBfdXNlcl9pZCIsInBfYW1vdW50IiwicHJpY2VfYW1vdW50IiwicF9vcGVyYXRpb24iLCJ0cmFuc2FjdGlvbkVycm9yIiwiZnJvbSIsInVwZGF0ZSIsInVwZGF0ZWRfYXQiLCJEYXRlIiwidG9JU09TdHJpbmciLCJlcSIsInBheW1lbnRfaWQiLCJpbnNlcnQiLCJ1c2VyX2lkIiwidHlwZSIsImFtb3VudCIsImRlc2NyaXB0aW9uIiwicGF5X2N1cnJlbmN5IiwidG9VcHBlckNhc2UiLCJjcmVhdGVkX2F0Iiwid2FybiIsImlwblNlY3JldCIsIk5PV1BBWU1FTlRTX0lQTl9TRUNSRVQiLCJleHBlY3RlZFNpZ25hdHVyZSIsImNyZWF0ZUhtYWMiLCJkaWdlc3QiLCJvcmRlcklkIiwicGFydHMiLCJzcGxpdCIsImxlbmd0aCJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/nowpayments/callback/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabase-client.ts":
/*!********************************!*\
  !*** ./lib/supabase-client.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   createClient: () => (/* binding */ createClient)\n/* harmony export */ });\n/* harmony import */ var _supabase_ssr__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/ssr */ \"(rsc)/./node_modules/@supabase/ssr/dist/module/index.js\");\n\nfunction createClient() {\n    return (0,_supabase_ssr__WEBPACK_IMPORTED_MODULE_0__.createBrowserClient)(\"https://yozkzosrgvrljrrkexlf.supabase.co\", \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inlvemt6b3NyZ3ZybGpycmtleGxmIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTk2ODQ3MzEsImV4cCI6MjA3NTI2MDczMX0.4W_tORMftP_e7Hv4MTZNfXQwuvb24i9JeUbqmz0d50k\");\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UtY2xpZW50LnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQW1EO0FBRTVDLFNBQVNDO0lBQ2QsT0FBT0Qsa0VBQW1CQSxDQUN4QkUsMENBQW9DLEVBQ3BDQSxrTkFBeUM7QUFFN0MiLCJzb3VyY2VzIjpbIi9Vc2Vycy9yb2ZlZXZnZW5paS9EZXNrdG9wL2xhYi9oaWdoYmlkYWkvbGliL3N1cGFiYXNlLWNsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVCcm93c2VyQ2xpZW50IH0gZnJvbSAnQHN1cGFiYXNlL3NzcidcblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUNsaWVudCgpIHtcbiAgcmV0dXJuIGNyZWF0ZUJyb3dzZXJDbGllbnQoXG4gICAgcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU1VQQUJBU0VfVVJMISxcbiAgICBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19TVVBBQkFTRV9BTk9OX0tFWSFcbiAgKVxufSJdLCJuYW1lcyI6WyJjcmVhdGVCcm93c2VyQ2xpZW50IiwiY3JlYXRlQ2xpZW50IiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX1VSTCIsIk5FWFRfUFVCTElDX1NVUEFCQVNFX0FOT05fS0VZIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase-client.ts\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/whatwg-url","vendor-chunks/tr46","vendor-chunks/webidl-conversions","vendor-chunks/cookie"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fnowpayments%2Fcallback%2Froute&page=%2Fapi%2Fnowpayments%2Fcallback%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fnowpayments%2Fcallback%2Froute.ts&appDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Frofeevgenii%2FDesktop%2Flab%2Fhighbidai&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();